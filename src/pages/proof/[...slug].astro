---
// src/pages/proof/[...slug].astro
import { getCollection } from 'astro:content';
import ProofPageTemplate from '@/components/templates/ProofPageTemplate.astro';

export const prerender = true;

export async function getStaticPaths() {
  const proofs = await getCollection('proofs');
  return proofs.map((p) => ({
    params: { slug: [p.data.category, p.slug] },
    props:  { entry: p },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const { data }    = entry;
---

<ProofPageTemplate
  title      ={data.title}
  difficulty ={data.difficulty}
  repro      ={data.repro}
  stack      ={data.stack}
  updated    ={data.updated}
  tags       ={data.tags ?? []}
  ci_status  ={data.ci_status ?? ''}
>
  <Content />
</ProofPageTemplate>
