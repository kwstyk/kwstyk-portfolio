---
interface Props {
  code: string;
  lang: string;
}

const { code, lang } = Astro.props;
---

<div class="relative bg-slate-800 text-white p-4 rounded-md overflow-x-auto">
  <pre><code class={`language-${lang}`}>{code}</code></pre>
  <button
    type="button"
    class="absolute top-2 right-2 text-xs bg-slate-600 hover:bg-slate-500 px-2 py-1 rounded"
  >
    Copy
  </button>
</div>

<script type="text/javascript" is:inline>
  const button = document.getElementById('copy-button');
  button?.addEventListener('click', () => {
    navigator.clipboard.writeText({code});
  });
</script>