---
import Layout         from '@/layouts/Layout.astro';
import ProofHero      from '@/components/organisms/ProofHero.astro';
import ProofMetaCard  from '@/components/organisms/ProofMetaCard.astro';

interface Props {
  title:       string;
  difficulty?: 'easy' | 'medium' | 'hard' | 'expert';
  repro:       ('docker' | 'terraform' | 'vagrant' | 'manual')[];
  stack:       string[];
  updated:     string;
  ci_status?:  string;
  tags?:       string[];
  class?:      string;
}

const {
  title,
  difficulty,
  repro,
  stack,
  ci_status: ciStatus,
  updated,
  tags = [],
  class: className = '',
} = Astro.props as Props;
---

<Layout siteName="KWSTYK Portfolio" pageTitle={`Proof | ${title}`} class={className}>
  <main class="flex-1 px-4 sm:px-6 lg:px-8 xl:px-16 py-8">

    <!-- ヒーローセクション -->
    <section class="container mx-auto px-20 py-20 bg-slate-700/20">
      <div class="max-w-2xl mx-auto text-center">
        <ProofHero
          title={title}
          difficulty={difficulty}
          repro={repro}
          stack={stack}
          ci_status={ciStatus}
        />
      </div>
    </section>

    <!-- 本文＋メタ -->
    <section class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="grid grid-cols-1 lg:grid-cols-[1fr,250px] gap-8">
        <!-- 本文側 -->
        <article class="prose prose-invert" lang="ja">
          <slot />
          <slot name="footer" />
        </article>

        <!-- サイドバー -->
        <aside class="space-y-6">
          <ProofMetaCard updated={updated} tags={tags} />
        </aside>
      </div>
    </section>
    <!-- 他レイヤーへの誘導 -->
<section class="mt-12 border-t border-gray-700 pt-8">
  <h2 class="text-lg font-bold text-[var(--accent)] mb-4">他のセクションも見る</h2>
  <div class="flex flex-wrap gap-4">
    <a href="/structure" class="text-sm underline text-blue-400 hover:text-blue-200">Structure（体系）を見る</a>
    <a href="/story" class="text-sm underline text-blue-400 hover:text-blue-200">Story（背景）を見る</a>
    <a href="/proof" class="text-sm underline text-blue-400 hover:text-blue-200">他の Proof を見る</a>
  </div>
</section>

  </main>
</Layout>
