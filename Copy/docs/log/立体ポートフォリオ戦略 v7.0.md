## ç«‹ä½“ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæˆ¦ç•¥ **v 7.1 â€“ â€œSelf-Driving Structureâ€ ç‰ˆ**  
æ›´æ–°æ—¥ : 2025-05-04  
ä½œè€…  : kwstyk / ChatGPT (o3)

> **ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚º** : `git clone â†’ Codespaces 1-click â†’ just up â€” 5 min ä½“é¨“ãƒ»10 min æ·±æ˜ã‚Šãƒ»24 h è‡ªå‹•æ¤œè¨¼ï¼è‡ªå·±ä¿®å¾©`
>
> **ã“ã® 1 ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘èª­ã‚ã°ã€è¨­è¨ˆæ€æƒ³ãƒ»ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ ãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼ãƒ»ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã¾ã§æŠŠæ¡ã§ãã¾ã™ã€‚**  
> å®Ÿè£…è¦ç´„ã®è©³ç´°ã¯åˆ¥å†Š **ã€Œãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸ã€** ã‚’å‚ç…§ã€‚

---

### 0. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½“ç³»

| ç¨®åˆ¥ | ç›®çš„ | ãƒ•ã‚¡ã‚¤ãƒ« |
| ---- | ---- | -------- |
| **æœ¬æ›¸ v 7.1** | ä¸Šä½æˆ¦ç•¥ãƒ»å“²å­¦ãƒ»æ”¹å–„ã‚µã‚¤ã‚¯ãƒ« | **`docs/strategy.md`** |
| ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸ | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¦ç´„ / ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç²’åº¦ | `docs/architecture-spec.md` |
| why.md | å„ Proof ã®è¨­è¨ˆåˆ¤æ–­ | `proofs/**/why.md` |

---

### 1. è¨­è¨ˆå“²å­¦ & æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆå¤‰æ›´å·®åˆ†ï¼‰

| è»¸ | v 7.0 | **v 7.1 å¤‰æ›´** |
| --- | ----- | -------------- |
| **UX 4å±¤** | Landingâ†’Structureâ†’Proofâ†’Story | å¤‰æ›´ãªã— |
| **Structure** | é™çš„ã‚«ãƒ¼ãƒ‰ | **`categories.json` + å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** |
| **Layout** | `title` å˜ä¸€ | **`siteName` / `pageTitle` åˆ†é›¢** |
| **Atomic Design** | atoms/molecules/organisms/templates | åŒå·¦ãƒ»Card ãƒãƒƒã‚¸æ‹¡å¼µ |
| **CIéšå±¤** | ci.yml / proof-ci.yml / nightly.yml | åŒå·¦ï¼ˆProof-CI/Nightly ã¯æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã§å¼·åŒ–ï¼‰ |

---

### 2. ãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“æ§‹æˆ *(2025-05 ç¾åœ¨)*

```text
kwstyk-portfolio/
â”œâ”€ .github/workflows/
â”‚   â”œâ”€ ci.yml              # Lint / type-check
â”‚   â”œâ”€ proof-ci.yml        # Proof å†ç¾ & Security (äºˆå®š)
â”‚   â””â”€ nightly.yml         # Lighthouse / Trivy / Link-check (äºˆå®š)
â”œâ”€ devcontainer.json / Dockerfile   # Codespaces & local VS Code
â”œâ”€ src/
â”‚   â”œâ”€ data/categories.json          # â˜… Structure ã‚«ãƒ¼ãƒ‰å®šç¾©
â”‚   â”œâ”€ content/proofs/**.mdx         # Proof ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€ pages/
â”‚   â”‚   â”œâ”€ index.astro               # Landing
â”‚   â”‚   â”œâ”€ structure/index.astro     # ã‚«ãƒ¼ãƒ‰ä¸€è¦§ (è‡ªå‹•ç”Ÿæˆ)
â”‚   â”‚   â”œâ”€ structure/[slug].astro    # ã‚«ãƒ†ã‚´ãƒªè©³ç´° (å‹•çš„)
â”‚   â”‚   â””â”€ proof/[...slug].astro     # Proof å‹•çš„
â”‚   â”œâ”€ components/ (Atomic)          # Card.astro ãªã©
â”‚   â”œâ”€ layouts/Layout.astro          # siteName/pageTitle åˆ†é›¢
â”‚   â””â”€ styles/
â”œâ”€ proofs/ <category>/<proof>/â€¦      # å†ç¾ç”¨ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€ docs/ strategy.md, architecture-spec.mdâ€¦
â”œâ”€ tools/  anki-gen, rss-to-json.ts (äºˆå®š)
â””â”€ scripts/ justfile, gen_onepager.py ãªã©
```

---

### 3. ãƒ¬ã‚¤ãƒ¤åˆ¥ä»•æ§˜ï¼ˆæœ€æ–°ç‰ˆï¼‰

#### 3-1 Landing

*Hero (Asciinema demo) / Pick3 / Progress Dashboard / CTA*

#### 3-2 Structure â˜…æ›´æ–°

| é …ç›® | å†…å®¹ |
| ---- | ---- |
| ãƒ‡ãƒ¼ã‚¿ | `data/categories.json` ã« `id,slug,title,description,icon,badge,color` |
| ä¸€è¦§ | `<Card>` ã‚’ map ç”Ÿæˆï¼ˆã‚¢ã‚¤ã‚³ãƒ³ãƒ»è‰²ä»˜ããƒãƒƒã‚¸ï¼‰ |
| ãƒ«ãƒ¼ãƒˆ | `/structure/` â†’ `/structure/{slug}/` (å‹•çš„) |
| è©³ç´° | `Layout` ã® `siteName="KWSTYK Portfolio" pageTitle="Structure | {title}"` |

#### 3-3 Proof (v 1.1 è¦ä»¶æ®ãˆç½®ã)

| è¦ç´  | æ±ºå®šäº‹é … |
| ---- | -------- |
| front-matter | `difficulty, repro[], stack[], updated, ci_status, stories[]` |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | `ProofHero â†’ ProofMetaCard â†’ MDX Body` |
| å†ç¾ãƒãƒƒã‚¸ | ğŸ³ Docker / ğŸ— Terraform / ğŸ“¦ Vagrant / ğŸ”§ Manual |

#### 3-4 Story (æ¬¡ãƒ•ã‚§ãƒ¼ã‚º)

| é …ç›® | æ–¹é‡ |
| ---- | ---- |
| ãƒ‡ãƒ¼ã‚¿ | Zenn / Note RSS â†’ `stories.json` è‡ªå‹•ç”Ÿæˆ |
| UI | Timeline / Card ä¸€è¦§ â”‚

---

### 4. CI/CD & å“è³ªã‚²ãƒ¼ãƒˆ

| Workflow | ä¸»ãƒã‚§ãƒƒã‚¯ | åˆæ ¼åŸºæº– |
| --------- | --------- | -------- |
| ci.yml | `pnpm lint && pnpm typecheck && astro build` | Error 0 |
| proof-ci.yml | å†ç¾ build, Trivy/Grype (äºˆå®š) | Critical/High 0 |
| nightly.yml | Lighthouse â‰¥95, dead-link 0 (äºˆå®š) | Slack é€šçŸ¥ |

---

### 5. è‡ªå‹•ç”Ÿæˆãƒ»ãƒ„ãƒ¼ãƒ«

| ãƒ„ãƒ¼ãƒ« | æ¦‚è¦ |
| ------ | ---- |
| `rss-to-json.ts` | Zenn/Note RSS â†’ `stories.json` ç”Ÿæˆï¼ˆæ¬¡ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ |
| `gen_onepager.py` | `progress.json` â†’ One-Pager.pdf (CI Artifact) |
| `anki-gen` | Proof/Story ã‹ã‚‰ Q&A â†’ Anki CSV |

---

### 6. é‹ç”¨ãƒ•ãƒ­ãƒ¼ï¼ˆãƒãƒ¼ã‚¸åˆ¤å®šã« Structure-CI ã‚’è¿½åŠ ï¼‰

```mermaid
graph TD
A(æ–° Branch)-->B[PR]
B-->C{ci.yml ç·‘?}
C-->|NG|Fix
C-->|OK|D{Structure/Proof CI}
D-->|NG|Fix
D-->|OK|Merge
Merge-->Nightly
Nightly-->E{Fail?}
E-->|Issue è‡ªå‹•èµ·ç¥¨|F[ä¿®æ­£ãƒ–ãƒ©ãƒ³ãƒ]
```

---

### 7. 2025 ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— (æ›´æ–°)

| Q | é‡ç‚¹ | KPI |
|---|------|-----|
| Q2 | **Structure å®Œå…¨è‡ªå‹•åŒ– & Story RSS é€£æº** | GitHub â˜…100 |
| Q3 | Proof-CI å¼·åŒ– (å†ç¾+è„†å¼±æ€§) / Self-host Runner | CI å®Ÿè¡Œæ™‚é–“ â‰¤5 min |
| Q4 | Nightly Lighthouse â‰¥95 / PWA å®Ÿè£… / å›½éš› SEO | æœˆé–“ 3k PV |

---

### 8. FAQ (è¿½åŠ )

| ç—‡çŠ¶ | åŸå›  | è§£æ±º |
|-----|------|-----|
| Tailwind å‹•çš„ãƒãƒƒã‚¸è‰²ãŒåŠ¹ã‹ãªã„ | safelist è¿½åŠ æœªãƒ“ãƒ«ãƒ‰ or CSS ä¸Šæ›¸ã | `class:list` ä½¿ç”¨ + `pnpm dev` å†èµ·å‹• |
| `props is not defined` | Layout å†…ã§åˆ†è§£ä»£å…¥å¾Œã« props ä½¿ç”¨ | `Astro.slots.has('footer')` ã¸ä¿®æ­£ |

---

> **Done is better than perfect â€” and Self-Driving is even better.**  
> Structure ãŒè‡ªå‹•é‹è»¢ã«ãªã£ãŸä»Šã€æ¬¡ã¯ Story & Proof-CI ã‚’è‡ªèµ°ã•ã›ã€24 h å“è³ªä¿è¨¼ãƒ«ãƒ¼ãƒ—ã‚’å®Œæˆã•ã›ã‚‹ã€‚