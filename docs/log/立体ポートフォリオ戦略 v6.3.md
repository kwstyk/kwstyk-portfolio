ä»¥ä¸‹ã¯ **ã€Œç«‹ä½“ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæˆ¦ç•¥ v 6.3 â€“ â€œæ‰¹åˆ¤ä¸èƒ½â€ ç¾çŠ¶åŒæœŸç‰ˆã€** ã§ã™ã€‚  
ã„ã¾å®Ÿéš›ã« GitHub repo (**kwstyk/astro-repro**) ã«å­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ãƒ•ã‚¡ã‚¤ãƒ«åãƒ»å®Ÿè£…æ–¹å¼ï¼ˆ`astro-content` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ + `getStaticPaths()`ï¼‰ã¸åˆã‚ã›ã¦ â€œæŠœã‘ãªãâ€ æ›¸ãç›´ã—ã¦ã„ã¾ã™ã€‚  

---

## 0. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½ç½®ã¥ã‘

| ç¨®åˆ¥ | ç›®çš„ | ãƒ•ã‚¡ã‚¤ãƒ« | å‚™è€ƒ |
|------|------|----------|------|
| **ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸** | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç²’åº¦ãƒ»å‘½åè¦ç´„ | `docs/architecture-spec.md` |
| **ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæˆ¦ç•¥ï¼ˆæœ¬æ›¸ v6.3ï¼‰** | ä½•ã‚’ï¼èª°ã«ï¼ã©ã†ä¼¸ã°ã™ã‹ã®å…¨ä½“æˆ¦ç•¥ | `docs/strategy.md` â† **ã“ã®å†…å®¹** |
| **why.md** | å„ Proof ã®è¨­è¨ˆåˆ¤æ–­ã‚’æ·±æ˜ã‚Š | `proofs/**/why.md` |

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã¨è¨­è¨ˆå“²å­¦

1. **Astro 4 + Tailwind 3 + astro-content**  
   - `src/content/proofs/**.mdx` ã‚’ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç† â†’ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ `src/pages/proof/[...slug].astro` ã§ **ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ« + getStaticPaths**ã€‚  
2. **Monorepo Ã— Codespaces 1-click**  
   - `devcontainer.json` ã¨ `Dockerfile` ã§ãƒ­ãƒ¼ã‚«ãƒ«å·®ã‚’ã‚¼ãƒ­åŒ–ã€‚  
3. **Atomic Design**  
   ```
   src/components/
     atoms/       (Badge, Button, Heading, DifficultyBadge, â€¦)
     molecules/   (Card, StackChip, CopyBlock, â€¦)
     organisms/   (Hero, ProofHero, Navbar, ProofList, â€¦)
     templates/   (ProofPageTemplate.astro)
   ```
4. **è‡ªå·±ä¿®å¾© CI**  
   - GitHub Actionsï¼š`ci.yml`ï¼ˆLint, type-checkï¼‰ / `proof-ci.yml`ï¼ˆDocker, Terraform, â€¦ï¼‰  
   - `nightly.yml`ï¼ˆTrivy, Lighthouse, lycheeï¼‰å¤±æ•—æ™‚ â†’ Issue or Slack MENTIONã€‚  
5. **å››å±¤ UX** â€“ ãã‚Œãã‚Œ â€œæ·±ã•â€ ã‚’å¯å¤‰  
   > Landing â†’ Structure â†’ **Proof (astro-content + MDX)** â†’ Storyï¼ˆZenn / Noteï¼‰

---

## 2. ãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“æ§‹é€ ï¼ˆ2025-05 ç¾åœ¨ï¼‰

```
astro-repro/
â”œâ”€ .github/workflows/
â”‚   â”œâ”€ ci.yml
â”‚   â”œâ”€ proof-ci.yml
â”‚   â””â”€ nightly.yml
â”œâ”€ src/
â”‚   â”œâ”€ content/
â”‚   â”‚   â””â”€ proofs/              # â† â˜… MDX ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”‚       â””â”€ network-security/
â”‚   â”‚           â””â”€ packet-capture.mdx
â”‚   â”œâ”€ pages/
â”‚   â”‚   â”œâ”€ index.astro          # Landing
â”‚   â”‚   â”œâ”€ structure/
â”‚   â”‚   â”‚   â””â”€ index.astro
â”‚   â”‚   â””â”€ proof/
â”‚   â”‚       â””â”€ [...slug].astro  # getStaticPaths ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«
â”‚   â”œâ”€ components/â€¦             # atoms / molecules / organisms / templates
â”‚   â””â”€ styles/â€¦                 # theme.css, landing.css, â€¦
â”œâ”€ proofs/                      # Docker/Vagrant/Terraform å®Ÿãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€ network-security/
â”‚       â””â”€ packet-capture/
â”œâ”€ docs/
â”‚   â”œâ”€ strategy.md              # â† æœ¬æ›¸
â”‚   â”œâ”€ architecture-spec.md
â”‚   â””â”€ decision/why.md
â””â”€ justfile / px CLI / etc.
```

---

## 3. ãƒ¬ã‚¤ãƒ¤åˆ¥ä»•æ§˜

### 3-1 Landing (`src/pages/index.astro`)
| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | å®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ |
|------------|--------------|
| Hero | `/public/demo.svg` (Asciinema) |
| Pick 3 | GitHub API â†’ Star & CI Success ä¸Šä½ Proof è¡¨ç¤º |
| Progress Dashboard | `progress.json` + Chart.js |
| CTA | One-Pager.pdf / Codespaces ãƒœã‚¿ãƒ³ |

### 3-2 Structure (`src/pages/structure/index.astro`)
* ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ¼ãƒ‰ã‚’ `@/components/molecules/Card.astro` ã§è‡ªå‹•ç”Ÿæˆ  
* ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã¯ `theme.css`ï¼ˆãƒ€ãƒ¼ã‚¯ãƒ–ãƒ«ãƒ¼ç³»ï¼‰ã¨åŒæœŸ  

### 3-3 Proof

#### a. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆfront-matterï¼‰  
```yaml
---
title: "Packet Capture Lab"
difficulty: "easy"          # easy | medium | hard | expert
repro: ["docker"]           # docker | terraform | vagrant | manual
stack: ["docker","tcpdump"]
updated: 2024-05-01
tags: ["pcap","wireshark"]
ci_status: "https://github.com/kwstyk/astro-repro/actions/workflows/proof-ci.yml/badge.svg"
---
```

#### b. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
* `src/pages/proof/[...slug].astro`
  ```ts
  import { getCollection } from 'astro:content';
  export async function getStaticPaths() {
    const proofs = await getCollection('proofs');
    return proofs.map(p => ({ params:{ slug: p.slug.split('/') }, props:{ entry:p } }));
  }
  export async function get({ props }) { return { props }; }
  ```

#### c. ProofPageTemplate.astro (æŠœç²‹)
```astro
<Layout>
  <ProofHero
    title={title} difficulty={difficulty}
    repro={repro} stack={stack}
    updated={updated} ci_status={ci_status} />
  <div class="prose prose-invert">
    <slot />             <!-- MDX æœ¬æ–‡ -->
  </div>
</Layout>
```

### 3-4 Story
* Zenn / Note RSS â†’ `data/stories.json` ï¼ˆ`story-sync.yml`ï¼‰

---

## 4. CI / å“è³ªã‚²ãƒ¼ãƒˆ

| ã‚¸ãƒ§ãƒ– | ãƒã‚§ãƒƒã‚¯ | åˆæ ¼åŸºæº– |
|-------|----------|---------|
| **ci.yml** | `pnpm lint && pnpm typecheck` | Error 0 |
| **proof-ci.yml** | å¤‰æ›´ã•ã‚ŒãŸ Proof ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã ã‘ matrix | *docker build --progress=plain* ãŒ exit 0 |
| **nightly.yml** | Lighthouse â‰¥ 95 / Trivy Critical 0 / lychee broken 0 | å…¨ pass |

---

## 5. é‹ç”¨ãƒ•ãƒ­ãƒ¼

1. **Proof ã‚’è¿½åŠ **  
   ```bash
   just new proof network-security/my-new-lab
   just dev      # ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œç¢ºèª
   git add .
   git commit -m "feat: add my-new-lab proof"
   git push origin feature/my-new-lab
   # PR â†’ CI green â†’ main merge
   ```
2. **Story å…¬é–‹ â†’ story-sync** ãŒè‡ªå‹•ã§ README ã«ãƒãƒƒã‚¸è¿½åŠ   
3. **Nightly** ã§è½ã¡ãŸã‚‰ `just fix:quick` â†’ PR

---

## 6. ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

| æœŸ | ç›®æ¨™ | KPI |
|----|------|-----|
| **2025-Q2** | 9 Proof ã® CI ç·‘åŒ– & Landing å®Œæˆ | GitHub â˜… 100 |
| **Q3** | Self-Hosted Runner (Raspberry Pi) å°å…¥ | Nightly 30 min |
| **Q4** | PWA + è‹±èª UI | æœˆé–“ 3 k PV / Recruiter å•åˆã› 5 ä»¶ |

---

## 7. FAQï¼ˆç¾çŠ¶ãƒãƒã‚Šã‚„ã™ã„ç‚¹ï¼‰

| ç—‡çŠ¶ | åŸå›  | è§£æ±ºç­– |
|------|------|--------|
| `GetStaticPathsInvalidRouteParam` | `slug` ãŒ **é…åˆ—** ã§ãªã„ | `params:{ slug: p.slug.split('/') }` ã«ä¿®æ­£ |
| `Property 'Content' does not exist` | astro-content v0.19 ä»¥é™ | `const { Content, data } = entry;` OKï¼ˆå‹ã‚¨ãƒ©ãƒ¼ã¯ generics è¿½åŠ ã§è§£æ¶ˆï¼‰ |
| CI ã§ `eslint` Not Found | `pnpm add -D eslint`ã€`package.json` scripts ã« `lint` è¿½åŠ  | |

---

### 8. å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸ (Packet-Capture)

```
/proof/network-security/packet-capture  â† 200 OK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Packet Capture Lab          â”‚
â”‚ Easy ğŸ³ Docker   tcpdump    â”‚
â”‚ CI âœ… passing               â”‚
â”‚ Updated: 2024-05-01         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Overview | Design Rationale | â€¦
```

---

> **Done is better than perfect.**  
> ã“ã® v6.3 ã‚’ â€œä»Šã®å®Ÿè£…â€ ã®åŒ—æ¥µæ˜Ÿã¨ã—ã¦é‹ç”¨ã—ã€ç–‘å•ç‚¹ã¯ Issue â†’ `docs/decision/*` ã¸ã€‚  

ï¼ˆæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ `main@HEAD` ã‚’åŸºæº–ã«ç”Ÿæˆï¼‰