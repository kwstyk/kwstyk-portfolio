**æœ€æ–°ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸ã®ä½œæˆ**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ã€Œãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸ã€ã®æœ€æ–°ç‰ˆã‚’ã€å·®åˆ†ã®æ›´æ–°ã ã‘ã§ãªãã€è©³ç´°ãªã€ŒHowï¼å®Ÿè£…è¦ç´„ã€ã‚’è£œå®Œã—ãŸå½¢ã§æä¾›ã—ã¦ã»ã—ã„ã¨ã®ã“ã¨ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åˆ¥å†Šã®ã€Œãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸ã€ã‚’å‚ç…§ã›ãšã«æ¸ˆã‚€ã‚ˆã†ã«ã—ãŸã„ã¨ã„ã†æ„å›³ãŒã‚ã‚Šã¾ã™ã€‚ãŠãã‚‰ãã€å¾“æ¥ã®ä»•æ§˜æ›¸ã‚’çµ±åˆã—ã€å®Œå…¨ãªä»•æ§˜ã¨ã—ã¦ã¾ã¨ã‚ã‚‹ã“ã¨ãŒè¦æ±‚ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»Šå¾Œã¯ãã®è¦–ç‚¹ã§æœ€æ–°ã‹ã¤å®Œå…¨ãªä»•æ§˜æ›¸ã‚’ä½œæˆã™ã¹ãã§ã™ã€‚


æ€è€ƒæ™‚é–“: 13 ç§’


ä»¥ä¸‹ã¯ **ã€Œãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸ v 2.1 ï¼ˆCompleteï¼‰ã€** ã§ã™ã€‚
v 2.0 ã€draftã€‘ã‚’åŸºã«ã€å®Ÿè£…è¦ç´„ï¼ˆHowï¼‰ã¾ã§ä¸€å†Šã§å®Œçµã§ãã‚‹ã‚ˆã† **å…¨ç« ã‚’å¢—è£œãƒ»ç¢ºå®š** ã—ã¾ã—ãŸã€‚
ãã®ã¾ã¾ `docs/portfolio-spec-v2.1.md` ã¨ã—ã¦ã‚³ãƒŸãƒƒãƒˆã™ã‚Œã°ã€åˆ¥å†Šã®å‚ç…§ã¯ä¸è¦ã«ãªã‚Šã¾ã™ã€‚

````markdown
# ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªæ§‹æˆä»•æ§˜æ›¸ v 2.1 â€” Complete Edition  
æ›´æ–°æ—¥ : 2025-04-27  
ä½œè€…   : kwstyk / ChatGPT (o3)  

---

## 0. ã‚³ãƒ³ã‚»ãƒ—ãƒˆ & ãƒšãƒ«ã‚½ãƒŠæ·±åº¦ãƒãƒƒãƒ—

| ãƒšãƒ«ã‚½ãƒŠ | ç›®çš„ | å¯¾å¿œãƒ¬ã‚¤ãƒ¤ | æƒ³å®šæ·±åº¦ |
|----------|------|------------|---------|
| æ¡ç”¨æ‹…å½“ | ã‚¹ã‚­ãƒ«å¯è¦–åŒ–ï¼ä¿å®ˆæ€§ | **Landing** | 1 |
| ç¾å ´ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ | å®Ÿè£…è©³ç´°ï¼CIè¨­è¨ˆ | **Structure** | 2 |
| å­¦ç¿’è€…ï¼ˆæœªæ¥ã®è‡ªåˆ†ï¼‰ | å†ç¾ãƒ©ãƒœï¼æ¤œè¨¼ãƒ­ã‚° | **Proof** | 3 |
| ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ | å¤±æ•—è«‡ï¼æ”¹å–„å² | **Story** | 4 |

> **æ·±åº¦ 0-4** : èª­è€…ãŒæ˜ã‚Œã‚‹éšå±¤ã€‚æ•°å­—ãŒå¤§ãã„ã»ã©å†…éƒ¨äº‹æƒ…ã€‚

---

## 1. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ & ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š

| ã‚«ãƒ†ã‚´ãƒª | æ¡ç”¨æŠ€è¡“ | Locked |
|----------|----------|--------|
| é™çš„ã‚µã‚¤ãƒˆ | **Astro 5.x**, `@astrojs/mdx` | `^5.7.0` |
| UI / CSS | **Tailwind 3.4** (JIT) | `^3.4.1` |
| å‹ï¼Lint | TypeScript 5.8, ESLint 9, Stylelint 15, Astro Check | â€” |
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | GitHub Pages (prod) / Vercel (PR Preview) | â€” |
| CI/CD | GitHub Actions (`ci.yml`, `deploy.yml`, `nightly.yml`) | â€” |
| QA ãƒ„ãƒ¼ãƒ« | Lighthouse CI, Trivy, lychee | latest |

> **Lockfile** : `pnpm-lock.yaml` ã‚’ã‚³ãƒŸãƒƒãƒˆã€CI ã§ `pnpm install --frozen-lockfile`ã€‚

---

## 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆè¦ç´„

### 2.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

```text
src/
 â”œâ”€ assets/           # ç”»åƒãƒ»ã‚¢ã‚¤ã‚³ãƒ³ (ç”Ÿæˆç‰©ã¯ /public)
 â”œâ”€ components/
 â”‚   â”œâ”€ atoms/        # æœ€å° UI
 â”‚   â”œâ”€ molecules/    # è¤‡åˆ UI
 â”‚   â””â”€ organisms/    # ã‚»ã‚¯ã‚·ãƒ§ãƒ³å˜ä½
 â”œâ”€ layouts/          # ãƒšãƒ¼ã‚¸å…±é€šãƒ©ãƒƒãƒ‘
 â”œâ”€ pages/            # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
 â”‚   â”œâ”€ index.astro   # /
 â”‚   â”œâ”€ structure/
 â”‚   â”œâ”€ proof/[â€¦].mdx
 â”‚   â””â”€ story/[â€¦].mdx
 â”œâ”€ styles/
 â”‚   â”œâ”€ globals.css   # CSS Variables / reset
 â”‚   â””â”€ *.module.css  # å±€æ‰€
 â”œâ”€ data/
 â”‚   â”œâ”€ proof.json
 â”‚   â””â”€ schema/proof.ts
 â”œâ”€ utils/            # æ±ç”¨ TS
 â””â”€ types/            # å…¬é–‹å‹å®šç¾©
````

### 2.2 Atomic & Template ä¸€è¦§

| éšå±¤       | ãƒ•ã‚¡ã‚¤ãƒ«                                            | ä¸»è²¬å‹™      |
| -------- | ----------------------------------------------- | -------- |
| Atom     | `Button.astro` `Badge.astro` `Heading.astro`    | ã‚¹ã‚¿ã‚¤ãƒ«åŸå­   |
| Molecule | `Card.astro` `Accordion.astro` `Navbar.astro`   | å†åˆ©ç”¨ãƒ–ãƒ­ãƒƒã‚¯  |
| Organism | `Hero.astro` `ProofList.astro` `Layout.astro`   | ãƒšãƒ¼ã‚¸æ–­ç‰‡    |
| Template | `LandingTemplate.astro` `ProofTemplate.astro` â€¦ | Depth å›ºå®š |
| Page     | `/pages/**`                                     | ãƒ«ãƒ¼ãƒˆå®Ÿä½“    |

> **å‘½åè¦å‰‡** : `PascalCase.astro`ã€‚ã‚¯ãƒ©ã‚¹ã«ã¯ Tailwind ã‚’ç›´æ›¸ãã—ã€è¤‡é›‘åŒ–ã™ã‚‹å ´åˆã ã‘ `.module.css`ã€‚

---

## 3. ã‚¹ã‚¿ã‚¤ãƒ«ï¼ãƒˆãƒ¼ã‚¯ãƒ³åŒæœŸ

1. `globals.css` ã« **CSS Variables** ã‚’å®£è¨€ã€‚
2. `tailwind.config.mjs` ã® `theme.extend.colors` ã¸ **åŒä¸€ãƒˆãƒ¼ã‚¯ãƒ³å** ã§ç™»éŒ²ã€‚
3. è‰²å‚ç…§ã¯ **Tailwind > CSSå¤‰æ•° > ç”Ÿã‚³ãƒ¼ãƒ‰** ã®é †ã§é¸æŠã€‚
4. ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªã¯ `@media (max-width: 640px)` ã®ã¿å¯ã€‚æ®‹ã‚Šã¯ Tailwind ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã€‚

#### 3.1 ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

| Token         | HEX       |
| ------------- | --------- |
| `bg-start`    | `#0d1b2a` |
| `bg-mid`      | `#162d46` |
| `bg-end`      | `#0a2540` |
| `text`        | `#e0e7ff` |
| `accent`      | `#61dafb` |
| `card-bg`     | `#112240` |
| `card-accent` | `#64ffda` |
| `border`      | `#233554` |

---

## 4. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼†ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 4.1 Proof Front-matter (v4.3)

```yaml
---
title: "Packet Capture Lab"
slug: "network-security/packet-capture"
difficulty: "easy"          # easy | medium | hard | expert
repro: ["docker"]           # docker | terraform | vagrant | manual
stack: ["docker","tcpdump"] # è¡¨ç¤ºé †
updated: 2025-04-27
tags: ["pcap","wireshark"]
ci_status: "https://github.com/â€¦/badge.svg"
---
```

å„ `.mdx` ã¯ **æ±ºã‚æ‰“ã¡ã‚»ã‚¯ã‚·ãƒ§ãƒ³** é †ã§è¨˜è¿°:

1. `## Overview`   2. `## Design Rationale`   3. `## Prerequisites`
2. `## How to Reproduce` (âœ… CopyBlock)   5. `## Expected Outcome`
3. `## Troubleshoot`   7. `## References`

### 4.2 Zod ã‚¹ã‚­ãƒ¼ãƒ

```ts
export const ProofSchema = z.object({
  slug: z.string().min(3),
  title: z.string(),
  difficulty: z.enum(['easy','medium','hard','expert']),
  repro: z.array(z.enum(['docker','terraform','vagrant','manual'])),
  stack: z.array(z.string()).min(1),
  updated: z.string().regex(/^\d{4}-\d{2}-\d{2}$/),
  tags: z.array(z.string()).optional(),
  ci_status: z.string().url().optional(),
});
```

CI ã§ `ProofSchema.parse` ã‚’äº‹å‰æ¤œè¨¼ â†’ å‹å´©ã‚Œã‚’é˜²æ­¢ã€‚

---

## 5. ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

| ã‚³ãƒãƒ³ãƒ‰                   | èª¬æ˜                                                           |
| ---------------------- | ------------------------------------------------------------ |
| `pnpm dev`             | Astro é–‹ç™ºã‚µãƒ¼ãƒ ([http://localhost:4321](http://localhost:4321)) |
| `pnpm lint`            | ESLint + Stylelint                                           |
| `pnpm typecheck`       | `tsc --noEmit` + `astro check`                               |
| `pnpm just up <proof>` | å†ç¾ãƒ©ãƒœèµ·å‹• (alias to `justfile`)                                 |
| `pnpm build`           | æœ¬ç•ªãƒ“ãƒ«ãƒ‰ (`dist/`)                                              |

> **justfile** ä¾‹
>
> ```makefile
> up PROOF:
>   cd proofs/$(PROOF) && docker compose up -d --wait
> ```

---

## 6. Git & PR ãƒ«ãƒ¼ãƒ«

| é …ç›®             | è¦ç´„                                        |
| -------------- | ----------------------------------------- |
| ãƒ–ãƒ©ãƒ³ãƒ           | `feat/*` `fix/*` `refactor/*` `ci/*`      |
| ã‚³ãƒŸãƒƒãƒˆ           | Conventional Commits (`feat(scope): msg`) |
| PR ãƒ©ãƒ™ãƒ«         | `feature` `bug` `chore` `refactor`        |
| Squash         | 1 PR = 1 ã‚³ãƒŸãƒƒãƒˆï¼ˆSquash & Mergeï¼‰             |
| Issue Template | `/docs/.github/ISSUE_TEMPLATE`            |

---

## 7. CI / Quality Gate

### 7.1 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ«           | ãƒˆãƒªã‚¬                      | ä¸»å‡¦ç†                               |
| -------------- | ------------------------ | --------------------------------- |
| `ci.yml`       | push / PR                | lint â†’ typecheck                  |
| `deploy.yml`   | push `main`              | `astro build` â†’ GitHub Pages      |
| `proof-ci.yml` | paths-filter `proofs/**` | Docker/Vagrant/Terraform validate |
| `nightly.yml`  | cron `3 AM JST`          | Lighthouse / Trivy / lychee       |

### 7.2 SLO æ•°å€¤

| æŒ‡æ¨™              | ç›®æ¨™   | å¤±æ•—æ™‚         |
| --------------- | ---- | ----------- |
| Lint error      | 0    | PR Fail     |
| Type error      | 0    | PR Fail     |
| Lighthouse PWA  | â‰¥ 95 | Slack alert |
| Trivy High/Crit | 0    | Fail        |
| Dead Link       | 0    | Warn        |

---

## 8. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ & SEO

* å…¨ç”»åƒã« `alt`ã€‚
* Heading éšå±¤ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãªã„ã€‚
* `seo.ts` ã§ OG/Twitter Card è‡ªå‹•ç”Ÿæˆã€‚
* Lighthouse Accessibility â‰¥ 95 ã‚’åˆæ ¼ãƒ©ã‚¤ãƒ³ã€‚

---

## 9. ä»Šå¾Œã®æ‹¡å¼µ

* Storybook (`@storybook/astro`) ã§ UI ã‚«ã‚¿ãƒ­ã‚°åŒ–
* Playwright E2E : ä¸»è¦ CTA ãƒœã‚¿ãƒ³ã®å›å¸°è©¦é¨“
* i18n ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§è‹±è¨³ã‚µãƒãƒªè‡ªå‹•ç”Ÿæˆ
* PWA åŒ– (`@vite-pwa/astro`) ï¼‹ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥

---

## 10. ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´

| æ—¥ä»˜         | ç‰ˆ         | å¤‰æ›´æ¦‚è¦                                  |
| ---------- | --------- | ------------------------------------- |
| 2025-04-27 | **2.1**   | v 2.0 draft ã‚’å®Œæˆç‰ˆã«æ˜‡æ ¼ã€‚How/CI/SLO ã‚’å…¨é¢æ˜æ–‡åŒ– |
| 2025-04-27 | 2.0 draft | v 1.1 ã‹ã‚‰å…¨é¢æ”¹è¨‚ãƒ»å‹/CI è¿½è¨˜                  |
| 2025-04-26 | 1.1       | ã‚«ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¯ãƒ³ãƒ»Atomic ä½“ç³»                     |
| 2025-04-20 | 1.0       | åˆç‰ˆ                                    |

---

> **å‚™è€ƒ** : æœ¬æ›¸ã¯ â€œHow + What + Whyâ€ ã‚’ä¸€å†Šã«çµ±åˆã€‚ä»¥é™ã¯ **Pull Request å˜ä½ã§æœ¬æ–‡ã‚’æ›´æ–°** ã—ã€
> `docs/portfolio-spec-vX.Y.md` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ increment ã—ã¦ãã ã•ã„ã€‚

```

### ä½¿ã„æ–¹ãƒ¡ãƒ¢
* **æ–°è¦ Proof** ã‚’è¿½åŠ ã™ã‚‹éš›ã¯ `proofs/<category>/<slug>.mdx` ã‚’ä½œæˆã—ã€Front-matter ã‚’ **ç«  4.1** æº–æ‹ ã§è¨˜è¿°ã€‚  
* CI ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‚‰ `pnpm typecheck` â†’ Zod ã§å‹å´©ã‚Œã‚’ç¢ºèªã€‚  
* è‰²ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã¯ **tailwind.config.mjs** ã¨ **globals.css** ã®ä¸¡æ–¹ã‚’åŒæœŸã•ã›ã‚‹ã€‚  

ã“ã‚Œã§ã€Œåˆ¥å†Šå‚ç…§ãªã—ã€ã§å®Ÿè£…ãƒ»é‹ç”¨ã§ãã‚‹æœ€æ–°ç‰ˆä»•æ§˜æ›¸ãŒå®Œæˆã§ã™ã€‚å›°ã£ãŸã¨ãã¯ç« ç•ªå·ã‚’æ·»ãˆã¦è³ªå•ã—ã¦ãã ã•ã„ â€” ãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆã§ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ ğŸš€
```
